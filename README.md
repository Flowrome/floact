<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev/svgjs" width="1000" height="171" viewBox="0 0 1000 171"><g transform="matrix(1,0,0,1,-0.6060416007943559,0.575130741465415)"><svg viewBox="0 0 396 68" data-background-color="#ffffff" preserveAspectRatio="xMidYMid meet" height="171" width="1000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><g id="tight-bounds" transform="matrix(1,0,0,1,0.2399924739145547,-0.2287069615184123)"><svg viewBox="0 0 395.5199999999999 68.45741392303685" height="68.45741392303685" width="395.5199999999999"><g><svg viewBox="0 0 522.8348952406632 90.49333747192985" height="68.45741392303685" width="395.5199999999999"><g><rect width="5.905052505313247" height="78.57598043872346" x="105.95159010363992" y="5.958678516603193" fill="#8b3c7f" opacity="1" stroke-width="0" stroke="transparent" fill-opacity="1" class="rect-o-0" data-fill-palette-color="primary" rx="1%" id="o-0" data-palette-color="#8b3c7f"></rect></g><g transform="matrix(1,0,0,1,127.31489524066323,12.506676886496813)"><svg viewBox="0 0 395.52 65.47998369893622" height="65.47998369893622" width="395.52"><g><svg viewBox="0 0 395.52 65.47998369893622" height="65.47998369893622" width="395.52"><g><svg viewBox="0 0 395.52 65.47998369893622" height="65.47998369893622" width="395.52"><g transform="matrix(1,0,0,1,0,0)"><svg width="395.52" viewBox="-1.2470588684082031 -34.04999923706055 209.28704833984375 34.64999771118164" height="65.47998369893622" data-palette-color="#8b3c7f"><path d="M32.6-33.3Q34.45-33.3 35.48-32.5 36.5-31.7 36.5-30.3L36.5-30.3Q36.5-29.6 36.3-28.95L36.3-28.95 35-24.3Q34.65-23 33.85-22.45 33.05-21.9 31.75-21.9L31.75-21.9Q30.5-21.9 29.75-22.43 29-22.95 28.65-24.15L28.65-24.15 27.85-27Q27.65-27.75 27.35-28 27.05-28.25 26.1-28.25L26.1-28.25 21.1-28.25 18.3-18.35 19.25-18.35Q19.95-18.35 20.48-18.55 21-18.75 21.6-19.3L21.6-19.3 23.15-20.6Q24-21.35 24.68-21.68 25.35-22 26.1-22L26.1-22Q27.05-22 27.68-21.45 28.3-20.9 28.3-19.9L28.3-19.9Q28.3-19.5 28.15-18.95L28.15-18.95 25.95-11.35Q25.2-8.9 23.25-8.9L23.25-8.9Q21.65-8.9 20.75-10.55L20.75-10.55 19.85-12.25Q19.5-12.95 19.2-13.15 18.9-13.35 18.3-13.35L18.3-13.35 16.85-13.35 14.75-5.9Q14.65-5.6 14.65-5.1L14.65-5.1Q14.65-4.4 14.98-3.95 15.3-3.5 15.95-3L15.95-3Q16.5-2.55 16.7-2.27 16.9-2 16.9-1.6L16.9-1.6Q16.9-0.7 16.1-0.35 15.3 0 13.75 0L13.75 0 1.2 0Q-0.1 0-0.75-0.48-1.4-0.95-1.2-1.8L-1.2-1.8Q-1.1-2.25-0.83-2.53-0.55-2.8 0-3.15L0-3.15Q0.85-3.65 1.35-4.2 1.85-4.75 2.15-5.9L2.15-5.9 8.3-27.45Q8.5-28.1 8.5-28.65L8.5-28.65Q8.5-29.25 8.33-29.65 8.15-30.05 7.8-30.5L7.8-30.5Q7.35-31.15 7.35-31.55L7.35-31.55Q7.35-31.7 7.45-32.1L7.45-32.1Q7.65-32.75 8.35-33.02 9.05-33.3 10.4-33.3L10.4-33.3 32.6-33.3ZM59.7-12.9Q61.1-12.9 61.82-12.33 62.55-11.75 62.55-10.7L62.55-10.7Q62.55-10.25 62.4-9.7L62.4-9.7 60.75-3.85Q60.1-1.7 58.92-0.85 57.75 0 55.45 0L55.45 0 31.95 0Q30.9 0 30.32-0.35 29.75-0.7 29.75-1.3L29.75-1.3Q29.75-1.6 29.9-1.95L29.9-1.95Q30.05-2.35 30.4-2.63 30.75-2.9 31.15-3.15L31.15-3.15Q31.95-3.65 32.45-4.17 32.95-4.7 33.3-5.9L33.3-5.9 39.4-27.45Q39.6-28.1 39.6-28.7L39.6-28.7Q39.6-29.25 39.42-29.63 39.25-30 38.95-30.5L38.95-30.5Q38.5-31.15 38.5-31.55L38.5-31.55Q38.5-31.7 38.6-32.1L38.6-32.1Q38.8-32.75 39.47-33.02 40.15-33.3 41.55-33.3L41.55-33.3 53.3-33.3Q54.35-33.3 54.92-32.98 55.5-32.65 55.5-32.05L55.5-32.05Q55.5-31.8 55.35-31.4L55.35-31.4Q55.2-31.05 54.92-30.78 54.65-30.5 54.42-30.38 54.2-30.25 54.1-30.15L54.1-30.15Q53.3-29.7 52.8-29.15 52.3-28.6 51.95-27.45L51.95-27.45 45.5-4.8 48.6-4.8Q49.75-4.8 50.57-5.2 51.4-5.6 52.3-6.7L52.3-6.7 55.75-10.8Q56.7-11.9 57.57-12.4 58.45-12.9 59.7-12.9L59.7-12.9ZM86.95-34.05Q93.25-34.05 96.8-31.08 100.34-28.1 100.34-22.5L100.34-22.5Q100.34-19.85 99.55-16.8L99.55-16.8Q98.05-11.2 94.9-7.3 91.75-3.4 87.4-1.4 83.05 0.6 77.95 0.6L77.95 0.6Q71.7 0.6 68.15-2.38 64.59-5.35 64.59-10.95L64.59-10.95Q64.59-13.5 65.45-16.8L65.45-16.8Q66.9-22.35 70.02-26.23 73.15-30.1 77.47-32.08 81.8-34.05 86.95-34.05L86.95-34.05ZM86.05-29.15Q84.55-29.15 83.34-27.95 82.15-26.75 80.97-24.03 79.8-21.3 78.45-16.45L78.45-16.45Q76.45-9.45 76.45-6.8L76.45-6.8Q76.45-5.25 77-4.55 77.55-3.85 78.75-3.85L78.75-3.85Q80.25-3.85 81.45-5.08 82.65-6.3 83.8-9 84.95-11.7 86.34-16.45L86.34-16.45Q88.3-23.35 88.3-26.15L88.3-26.15Q88.3-27.75 87.75-28.45 87.2-29.15 86.05-29.15L86.05-29.15ZM131.19-22.9L126.29-5.9Q126.09-5.25 126.09-4.6L126.09-4.6Q126.09-4.05 126.24-3.68 126.39-3.3 126.57-3.08 126.74-2.85 126.79-2.75L126.79-2.75Q127.29-2.25 127.29-1.75L127.29-1.75Q127.29-1.65 127.19-1.25L127.19-1.25Q126.99-0.55 126.32-0.28 125.64 0 124.24 0L124.24 0 112.39 0Q111.34 0 110.77-0.35 110.19-0.7 110.19-1.3L110.19-1.3Q110.19-1.6 110.34-1.95L110.34-1.95Q110.49-2.35 110.77-2.58 111.04-2.8 111.54-3.1L111.54-3.1Q112.34-3.55 112.84-4.1 113.34-4.65 113.69-5.9L113.69-5.9 114.99-10.2 107.19-10.2 105.84-7.35Q104.99-5.5 104.99-4.45L104.99-4.45Q104.99-3.85 105.19-3.48 105.39-3.1 105.79-2.7L105.79-2.7Q106.14-2.3 106.27-2.02 106.39-1.75 106.29-1.3L106.29-1.3Q106.09-0.55 105.47-0.28 104.84 0 103.49 0L103.49 0 96.04 0Q94.89 0 94.29-0.43 93.69-0.85 93.69-1.55L93.69-1.55Q93.69-2.35 94.27-2.83 94.84-3.3 95.99-3.85L95.99-3.85Q97.49-4.6 98.39-5.33 99.29-6.05 99.94-7.35L99.94-7.35 108.84-25.8Q110.89-30.1 113.67-32.02 116.44-33.95 120.99-33.95L120.99-33.95Q126.09-33.95 128.89-31.88 131.69-29.8 131.69-26.1L131.69-26.1Q131.69-24.55 131.19-22.9L131.19-22.9ZM109.49-15.2L116.49-15.2 119.14-24Q119.34-24.6 119.34-25.25L119.34-25.25Q119.34-26.2 118.82-26.68 118.29-27.15 117.34-27.15L117.34-27.15Q116.14-27.15 115.29-26.45 114.44-25.75 113.59-23.95L113.59-23.95 109.49-15.2ZM148.04 0.3Q143.84 0.3 140.49-1.25 137.14-2.8 135.17-5.83 133.19-8.85 133.19-13.15L133.19-13.15Q133.19-16.15 134.24-19.65L134.24-19.65Q136.54-27.15 141.19-30.48 145.84-33.8 151.14-33.8L151.14-33.8Q153.99-33.8 156.19-32.95 158.39-32.1 160.24-30.5L160.24-30.5 161.59-31.55Q162.94-32.6 163.87-33 164.79-33.4 165.94-33.4L165.94-33.4Q167.19-33.4 167.94-32.85 168.69-32.3 168.69-31.25L168.69-31.25Q168.69-30.7 168.49-30.15L168.49-30.15 165.69-22.35Q165.24-21 164.62-20.45 163.99-19.9 162.74-19.9L162.74-19.9Q161.44-19.9 160.62-20.83 159.79-21.75 158.74-24L158.74-24Q157.54-26.35 156.79-27.1 156.04-27.85 154.59-27.85L154.59-27.85Q152.54-27.85 150.64-25.33 148.74-22.8 147.19-17.75L147.19-17.75Q145.89-13.5 145.89-10.65L145.89-10.65Q145.89-8.15 146.84-6.93 147.79-5.7 149.39-5.7L149.39-5.7Q151.74-5.7 153.27-6.75 154.79-7.8 156.39-9.6L156.39-9.6Q157.39-10.7 158.02-11.23 158.64-11.75 159.34-11.75L159.34-11.75Q160.24-11.75 161.24-10.85 162.24-9.95 162.19-9.05L162.19-9.05Q162.24-7.95 160.42-5.65 158.59-3.35 155.37-1.53 152.14 0.3 148.04 0.3L148.04 0.3ZM205.29-33.3Q208.04-33.3 208.04-31.05L208.04-31.05Q208.04-30.35 207.74-29.3L207.74-29.3 206.54-25.25Q205.99-23.4 205.19-22.65 204.39-21.9 202.89-21.9L202.89-21.9Q201.64-21.9 200.96-22.55 200.29-23.2 199.69-24.6L199.69-24.6 198.84-26.65Q198.44-27.6 197.99-27.95 197.54-28.3 196.59-28.3L196.59-28.3 195.44-28.3 189.09-5.95Q188.94-5.3 188.94-4.8L188.94-4.8Q188.94-4.2 189.11-3.8 189.29-3.4 189.64-2.95L189.64-2.95Q190.09-2.25 190.09-1.8L190.09-1.8Q190.09-1.7 189.99-1.3L189.99-1.3Q189.74-0.65 189.01-0.35 188.29-0.05 186.94-0.05L186.94-0.05 175.19-0.05Q174.14-0.05 173.56-0.4 172.99-0.75 172.99-1.4L172.99-1.4Q172.99-1.7 173.14-2L173.14-2Q173.34-2.45 173.61-2.68 173.89-2.9 174.44-3.25L174.44-3.25Q175.19-3.7 175.69-4.25 176.19-4.8 176.54-5.95L176.54-5.95 182.84-28.3 181.69-28.3Q180.59-28.3 179.89-27.95 179.19-27.6 178.39-26.65L178.39-26.65 176.74-24.6Q175.59-23.25 174.51-22.58 173.44-21.9 172.19-21.9L172.19-21.9Q171.04-21.9 170.39-22.5 169.74-23.1 169.74-24.15L169.74-24.15Q169.74-24.65 169.89-25.25L169.89-25.25 171.19-29.8Q171.59-31.2 172.09-31.93 172.59-32.65 173.51-32.98 174.44-33.3 176.14-33.3L176.14-33.3 205.29-33.3Z" opacity="1" transform="matrix(1,0,0,1,0,0)" fill="#8b3c7f" class="undefined-text-0" data-fill-palette-color="primary" id="text-0"></path></svg></g></svg></g></svg></g></svg></g><g><svg viewBox="0 0 90.49333747192985 90.49333747192985" height="90.49333747192985" width="90.49333747192985"><g><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0" y="0" viewBox="5 5 90 90" enable-background="new 0 0 100 100" xml:space="preserve" height="90.49333747192985" width="90.49333747192985" class="icon-icon-0" data-fill-palette-color="accent" id="icon-0"><path fill="#8b3c7f" d="M95 52c0-12.871-5.692-24.431-14.682-32.318C72.431 10.692 60.871 5 48 5 24.29 5 5 24.29 5 48c0 12.868 5.69 24.426 14.677 32.313C27.564 89.306 39.126 95 52 95c0.084 0 0.166-0.006 0.25-0.006S52.416 95 52.5 95C75.972 95 95 75.972 95 52.5c0-0.084-0.006-0.166-0.006-0.25S95 52.084 95 52zM21.828 73.371c-4.245-5.978-6.77-13.259-6.822-21.121 0.135-20.511 16.732-37.109 37.244-37.244 7.862 0.052 15.144 2.577 21.121 6.822C80.224 28.473 84.5 37.758 84.5 48c0 20.126-16.374 36.5-36.5 36.5C37.758 84.5 28.473 80.224 21.828 73.371zM6 48C6 24.841 24.841 6 48 6c9.858 0 18.926 3.422 26.1 9.13C67.637 11.242 60.076 9 52 9 28.29 9 9 28.29 9 52c0 8.074 2.241 15.633 6.127 22.095C9.421 66.923 6 57.856 6 48zM52 89c-10.08 0-19.227-4.055-25.905-10.615C32.269 82.854 39.838 85.5 48 85.5c20.678 0 37.5-16.822 37.5-37.5 0-8.162-2.646-15.731-7.115-21.905C84.945 32.773 89 41.92 89 52 89 72.402 72.402 89 52 89z" data-fill-palette-color="accent"></path></svg></g></svg></g></svg></g></svg><rect width="395.5199999999999" height="68.45741392303685" fill="none" stroke="none" visibility="hidden"></rect></g></svg></g></svg>

# Introduction

This library is a monorepo template to create web-app application using this stack

- **[NextJS](https://nextjs.org/)** - as SSR web framework
- **[Flask](https://flask.palletsprojects.com/en/2.2.x/)** - as Rest API backend server
- **[StencilJS](https://stenciljs.com/)** - as UI library using web components

# Sections

- [Requirements](#requirements)
- [Get started](#get-started)
- [How to start local environment](#how-to-start-local-environment)
- [How to build the web app for production](#how-to-build-the-web-app-for-production)
- [How to use environments](#how-to-use-environments)
- [External libraries](#external-libraries)
- [UI library](#ui-library)
- [Server](#server)


<div id="requirements"></div>

# Requirements


- [Python 3+](https://www.python.org/downloads/)
- [Nodejs 16+ / npm](https://nodejs.org/en/)


<div id="get-started"></div>

# Get started

- Run `rm -rf .git` to remove the git project
- Replace the following placeholders with your application name in the project folder (use CMD/CTRL + SHIFT + F as a find shortcuts in **VSCode**):
  - **FLOACT** -> **APPLICATION NAME IN UPPERCASE**
  - **floact** -> **application name in lowercase (use only alphacharacter)**
- Run `npm init` in the project root folder to install all the dependencies needed

<div id="how-to-start-local-environemt"></div>

# How to start local environment

- Run `npm start` in the project root folder to create a development local web server
  - Will build the UI components from **uilib** app
  - Will start the flask apis server from **server** app
  - Will start the NextJS web app from **client** app

<div id="how-to-build-the-web-app-for-production"></div>

# How to build the web app for production

- Run `npm build` in the project root folder to build the web application
  - Will build the UI components from **uilib** app
  - Will build the NextJS web app from **client** app

<div id="how-to-use-environments"></div>

# How to use environments

- Create the file `envs/.env.[ENVIRONMENT_NAME]`
- Write the following scripts inside the `package.json` in the project root folder:
  - `"start:[ENVIRONMENT_NAME]":"concurrently -n client,server -c #CC5A71,#3F84E5 \"yarn start:client:[ENVIRONMENT_NAME]\" \"yarn start:server:[ENVIRONMENT_NAME]\""` will start all the apps using [concurrently](https://www.npmjs.com/package/concurrently)
  - `"start:client:[ENVIRONMENT_NAME]": "rm -rf apps/client/.next && yarn build:ui && cd apps/client && npm run build && ENV=[ENVIRONMENT_NAME] npm start"` will start the **client** app using the environment you want
  - `"start:server:[ENVIRONMENT_NAME]": "cd apps/server && ENV=[ENVIRONMENT_NAME] gunicorn --bind=0.0.0.0:3001 wsgi:app" `will start the **server** app using the environment you want
  - `"start:ui:[ENVIRONMENT_NAME]": "cd apps/uilib && ENV=[ENVIRONMENT_NAME] npm run start",` will start the **ui** app using the environment you want
- Run `yarn start:[ENVIRONMENT_NAME]` to launch all the apps
- **SIDE NOTES**:
  - Please try to mantain all the environemnt variables available in each environment
  - Three environments should be enough but eventually you can add/remove how many you like following the procedure above

<div id="external-libraries"></div>

# External libraries

It is a monorepo so you can keep the libraries in the root project (you can use **yarn** or **npm** as you prefer)

<div id="ui-library"></div>

# UI library

The UI library is optional so you can keep it or remove it according the project requirements, here are some hints:

- The UI library is written using **Web Components** using **StencilJS**
- All the **css variables** that define the global theme should be written inside the UI library
- If you choose to remove the UI library please remove all the references inside the **client** app
  - remove `apps/uilib` folder
  - remove all scripts that end with `:ui` in the package.json of the project (also the references inside other scripts)
  - remove inside `apps/client` of `@floact/uilib`

<div id="server"></div>

# Server

The **server** app is using Flask and Python3 as core libraries

- It is served with `flask run` in local environment
- It is server using **[wsgi](https://flask.palletsprojects.com/en/2.2.x/deploying/)** and **[gunicorn](https://gunicorn.org/)** in any other environment

You can check the file `apps/server/apis/home.py` for a `hello world` example on how this works, the api will be requested by `apps/client/pages/home` page and inserted inside the `apps/uilib/src/components/hello-world` component as a props

Here's the example (Only visible in localhost):

**[{this.apiTestString}](http://localhost:3001/api/home/)**
