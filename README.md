<a href="https://github.com/Flowrome/floact">
<svg width="100%" height="100%" viewBox="0 0 2500 834" version="1.1" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
<g>
<g id="o-0">
<path d="M618.08,264.697c-0,-5.139 -4.171,-9.306 -9.309,-9.306c-5.137,-0 -9.308,4.167 -9.308,9.306l-0,303.942c-0,5.133 4.171,9.306 9.308,9.306c5.138,0 9.309,-4.173 9.309,-9.306l-0,-303.942Z" fill="#cc5a71" />
</g>
<g id="text-0">
<path d="M932.091,289.348c9.713,0 17.271,2.1 22.679,6.3c5.355,4.2 8.03,9.975 8.03,17.325c-0,3.671 -0.525,7.217 -1.575,10.63l-10.238,36.612c-1.833,6.825 -4.854,11.679 -9.054,14.567c-4.2,2.887 -9.708,4.333 -16.533,4.333c-6.563,0 -11.813,-1.392 -15.75,-4.175c-3.938,-2.729 -6.825,-7.246 -8.659,-13.542l-6.3,-22.441c-1.05,-3.938 -2.362,-6.563 -3.937,-7.875c-1.575,-1.313 -4.854,-1.967 -9.842,-1.967l-39.371,-0l-22.046,77.95l7.48,-0c3.675,-0 6.904,-0.525 9.683,-1.575c2.729,-1.05 5.671,-3.017 8.821,-5.904l12.204,-10.238c4.462,-3.937 8.479,-6.771 12.046,-8.504c3.516,-1.679 7.246,-2.517 11.183,-2.517c4.988,0 9.133,1.442 12.438,4.33c3.258,2.887 4.883,6.954 4.883,12.204c-0,2.1 -0.392,4.591 -1.179,7.479l-17.325,59.842c-3.938,12.862 -11.021,19.291 -21.259,19.291c-8.4,0 -14.962,-4.329 -19.687,-12.991l-7.083,-13.384c-1.838,-3.675 -3.546,-6.037 -5.121,-7.087c-1.575,-1.05 -3.938,-1.575 -7.084,-1.575l-11.42,-0l-16.534,58.662c-0.525,1.575 -0.787,3.671 -0.787,6.296c-0,3.675 0.866,6.696 2.6,9.059c1.679,2.362 4.225,4.854 7.637,7.479c2.888,2.362 4.854,4.279 5.904,5.745c1.05,1.421 1.575,3.18 1.575,5.28c0,4.72 -2.1,8.004 -6.3,9.841c-4.2,1.838 -10.366,2.754 -18.504,2.754l-98.816,0c-6.825,0 -11.942,-1.258 -15.355,-3.779c-3.412,-2.466 -4.595,-5.933 -3.545,-10.391c0.525,-2.363 1.495,-4.28 2.916,-5.75c1.467,-1.417 3.646,-3.046 6.534,-4.884c4.462,-2.625 8.004,-5.379 10.629,-8.266c2.625,-2.888 4.725,-7.35 6.3,-13.384l48.425,-169.687c1.05,-3.413 1.575,-6.559 1.575,-9.446c-0,-3.15 -0.446,-5.775 -1.338,-7.875c-0.946,-2.1 -2.337,-4.329 -4.175,-6.692c-2.362,-3.412 -3.541,-6.171 -3.541,-8.271c-0,-0.787 0.262,-2.229 0.787,-4.329c1.05,-3.412 3.413,-5.825 7.088,-7.246c3.67,-1.466 9.054,-2.204 16.141,-2.204l174.8,0Zm213.384,160.629c7.35,0 12.916,1.496 16.695,4.488c3.83,3.046 5.746,7.325 5.746,12.837c0,2.363 -0.391,4.988 -1.179,7.875l-12.992,46.063c-3.412,11.283 -8.216,19.158 -14.412,23.621c-6.142,4.462 -15.246,6.691 -27.321,6.691l-185.037,0c-5.513,0 -9.792,-0.916 -12.838,-2.754c-2.992,-1.837 -4.487,-4.333 -4.487,-7.483c-0,-1.571 0.395,-3.279 1.183,-5.117c0.787,-2.1 2.1,-3.883 3.937,-5.354c1.838,-1.417 3.805,-2.783 5.905,-4.096c4.2,-2.625 7.612,-5.3 10.237,-8.029c2.625,-2.783 4.854,-7.325 6.692,-13.621l48.029,-169.687c1.05,-3.413 1.575,-6.692 1.575,-9.842c-0,-2.887 -0.471,-5.329 -1.417,-7.321c-0.891,-1.941 -2.125,-4.225 -3.7,-6.85c-2.362,-3.412 -3.541,-6.171 -3.541,-8.271c-0,-0.787 0.262,-2.229 0.787,-4.329c1.05,-3.412 3.333,-5.825 6.85,-7.246c3.567,-1.466 9.029,-2.204 16.375,-2.204l92.521,0c5.512,0 9.762,0.842 12.754,2.521c3.046,1.733 4.567,4.175 4.567,7.325c-0,1.308 -0.392,3.017 -1.179,5.117c-0.788,1.837 -1.917,3.462 -3.388,4.879c-1.417,1.471 -2.729,2.521 -3.933,3.15c-1.159,0.683 -1.996,1.287 -2.521,1.812c-4.2,2.363 -7.613,4.988 -10.238,7.875c-2.625,2.888 -4.854,7.35 -6.691,13.384l-50.788,178.346l24.409,-0c6.037,-0 11.208,-1.05 15.512,-3.15c4.358,-2.1 8.896,-6.034 13.621,-11.809l27.167,-32.283c4.987,-5.775 9.762,-9.975 14.329,-12.6c4.621,-2.625 10.212,-3.938 16.771,-3.938Zm214.566,-166.533c33.071,0 58.925,7.796 77.559,23.388c18.583,15.641 27.875,38.162 27.875,67.558c-0,13.908 -2.075,28.871 -6.221,44.879c-7.875,29.396 -20.079,54.333 -36.613,74.804c-16.537,20.471 -36.221,35.959 -59.054,46.455c-22.837,10.5 -47.637,15.75 -74.412,15.75c-32.809,-0 -58.53,-7.821 -77.163,-23.463c-18.687,-15.592 -28.033,-38.088 -28.033,-67.483c-0,-13.384 2.258,-28.738 6.775,-46.063c7.608,-29.133 19.604,-53.883 35.983,-74.25c16.429,-20.317 35.983,-35.671 58.658,-46.062c22.73,-10.342 47.613,-15.513 74.646,-15.513Zm-7.087,38.583c-7.871,0 -14.984,3.15 -21.338,9.45c-6.246,6.296 -12.466,16.588 -18.662,30.863c-6.142,14.333 -12.754,34.225 -19.842,59.687c-10.496,36.746 -15.746,62.071 -15.746,75.984c0,8.137 1.442,14.041 4.329,17.716c2.888,3.676 7.48,5.513 13.78,5.513c7.875,-0 14.962,-3.229 21.262,-9.688c6.296,-6.404 12.467,-16.691 18.5,-30.866c6.038,-14.171 12.704,-33.725 20,-58.659c10.292,-36.22 15.433,-61.679 15.433,-76.379c0,-8.4 -1.441,-14.433 -4.329,-18.108c-2.887,-3.675 -7.35,-5.513 -13.387,-5.513Zm355.433,49.213l-38.583,133.858c-1.05,3.409 -1.575,6.821 -1.575,10.234c-0,2.887 0.396,5.304 1.183,7.245c0.788,1.996 1.654,3.571 2.596,4.725c0.892,1.205 1.471,2.071 1.733,2.596c2.625,2.625 3.938,5.25 3.938,7.875c-0,0.525 -0.263,1.838 -0.788,3.938c-1.05,3.675 -3.333,6.221 -6.85,7.637c-3.571,1.471 -9.029,2.204 -16.379,2.204l-93.304,0c-5.513,0 -9.767,-0.916 -12.758,-2.754c-3.046,-1.837 -4.567,-4.333 -4.567,-7.483c-0,-1.571 0.396,-3.279 1.183,-5.117c0.788,-2.1 1.913,-3.754 3.384,-4.958c1.416,-1.158 3.437,-2.521 6.062,-4.096c4.2,-2.362 7.613,-4.987 10.238,-7.875c2.625,-2.887 4.854,-7.612 6.691,-14.171l10.238,-33.858l-61.417,-0l-10.629,22.437c-4.463,9.713 -6.696,17.325 -6.696,22.838c0,3.15 0.525,5.696 1.575,7.637c1.05,1.996 2.625,4.042 4.725,6.142c1.838,2.1 3.096,3.883 3.779,5.354c0.629,1.417 0.684,3.309 0.159,5.667c-1.05,3.937 -3.2,6.617 -6.459,8.033c-3.304,1.471 -8.5,2.204 -15.587,2.204l-58.663,0c-6.037,0 -10.629,-1.129 -13.779,-3.383c-3.15,-2.208 -4.725,-5.146 -4.725,-8.821c0,-4.2 1.525,-7.558 4.567,-10.079c2.991,-2.467 7.508,-5.146 13.546,-8.029c7.87,-3.938 14.17,-7.825 18.895,-11.654c4.725,-3.779 8.792,-9.084 12.205,-15.909l70.079,-145.275c10.762,-22.57 23.437,-38.895 38.029,-48.975c14.542,-10.129 33.754,-15.195 57.637,-15.195c26.775,-0 47.509,5.433 62.209,16.3c14.696,10.916 22.046,26.087 22.046,45.512c-0,8.133 -1.313,16.533 -3.938,25.196Zm-170.867,60.629l55.121,0l20.863,-69.292c1.05,-3.15 1.575,-6.429 1.575,-9.841c-0,-4.988 -1.363,-8.742 -4.092,-11.263c-2.783,-2.466 -6.667,-3.7 -11.654,-3.7c-6.3,0 -11.679,1.838 -16.142,5.513c-4.462,3.675 -8.925,10.237 -13.387,19.687l-32.284,68.896Zm303.542,122.046c-22.046,-0 -41.862,-4.067 -59.446,-12.204c-17.587,-8.138 -31.55,-20.159 -41.891,-36.063c-10.392,-15.854 -15.592,-35.066 -15.592,-57.637c-0,-15.75 2.758,-32.809 8.271,-51.184c12.071,-39.366 30.312,-67.791 54.721,-85.275c24.412,-17.425 50.525,-26.141 78.35,-26.141c14.958,-0 28.212,2.233 39.762,6.696c11.546,4.462 22.179,10.891 31.888,19.291l10.629,-8.271c7.087,-5.508 13.071,-9.316 17.954,-11.416c4.829,-2.1 10.262,-3.15 16.3,-3.15c6.562,-0 11.812,1.446 15.746,4.333c3.937,2.888 5.908,7.083 5.908,12.596c0,2.887 -0.525,5.775 -1.575,8.662l-22.05,61.417c-2.358,7.088 -5.167,12.075 -8.425,14.963c-3.304,2.887 -8.242,4.329 -14.8,4.329c-6.825,-0 -12.392,-2.442 -16.696,-7.321c-4.354,-4.829 -9.287,-13.15 -14.8,-24.963c-6.3,-12.337 -11.416,-20.47 -15.354,-24.408c-3.937,-3.937 -9.712,-5.908 -17.325,-5.908c-10.758,-0 -21.129,6.616 -31.1,19.846c-9.975,13.279 -19.029,33.175 -27.167,59.683c-6.825,22.308 -10.237,40.946 -10.237,55.904c-0,13.125 2.496,22.888 7.483,29.292c4.984,6.458 11.679,9.687 20.075,9.687c12.338,0 22.521,-2.758 30.554,-8.271c7.98,-5.512 16.167,-12.991 24.567,-22.441c5.25,-5.771 9.525,-10.05 12.833,-12.834c3.255,-2.729 6.721,-4.091 10.396,-4.091c4.721,-0 9.709,2.358 14.959,7.083c5.25,4.725 7.741,9.45 7.479,14.175c0.262,5.775 -4.384,14.696 -13.938,26.771c-9.604,12.075 -22.858,22.887 -39.762,32.442c-16.954,9.604 -36.192,14.408 -57.717,14.408Zm450.788,-264.567c14.433,0 21.654,5.909 21.654,17.717c-0,3.675 -0.788,8.271 -2.363,13.779l-9.45,31.892c-2.887,9.712 -6.429,16.533 -10.629,20.471c-4.2,3.937 -10.237,5.908 -18.112,5.908c-6.559,-0 -11.625,-1.708 -15.196,-5.121c-3.517,-3.412 -6.85,-8.792 -10,-16.142l-6.692,-16.141c-2.1,-4.988 -4.333,-8.4 -6.692,-10.234c-2.362,-1.837 -6.037,-2.758 -11.025,-2.758l-9.054,0l-50,175.983c-0.787,3.413 -1.183,6.43 -1.183,9.055c-0,3.15 0.446,5.775 1.342,7.875c0.941,2.1 2.333,4.329 4.17,6.691c2.363,3.675 3.542,6.696 3.542,9.059c0,0.525 -0.262,1.837 -0.783,3.933c-1.313,3.412 -3.888,5.908 -7.717,7.483c-3.783,1.575 -9.212,2.363 -16.3,2.363l-92.521,-0c-5.512,-0 -9.787,-0.921 -12.833,-2.759c-2.992,-1.837 -4.488,-4.462 -4.488,-7.875c0,-1.57 0.392,-3.145 1.18,-4.72c1.05,-2.363 2.283,-4.15 3.7,-5.355c1.47,-1.158 3.65,-2.654 6.537,-4.491c3.938,-2.359 7.217,-4.984 9.842,-7.871c2.625,-2.888 4.854,-7.35 6.691,-13.388l49.609,-175.983l-9.054,0c-5.775,0 -10.5,0.921 -14.175,2.758c-3.675,1.834 -7.613,5.246 -11.813,10.234l-12.992,16.141c-6.037,7.088 -11.887,12.388 -17.558,15.905c-5.617,3.57 -11.704,5.358 -18.267,5.358c-6.037,-0 -10.762,-1.575 -14.175,-4.725c-3.412,-3.15 -5.116,-7.483 -5.116,-12.992c-0,-2.625 0.391,-5.512 1.179,-8.662l10.237,-35.829c2.1,-7.346 4.463,-12.938 7.088,-16.771c2.625,-3.779 6.35,-6.534 11.179,-8.267c4.883,-1.679 11.788,-2.521 20.708,-2.521l229.53,0Z" fill="#cc5a71" fill-rule="nonzero" />
</g>
<g>
<path d="M563.554,425.047c-0,-53.925 -23.846,-102.354 -61.508,-135.4c-33.042,-37.662 -81.475,-61.508 -135.396,-61.508c-99.334,0 -180.15,80.817 -180.15,180.15c-0,53.908 23.837,102.333 61.487,135.375c33.046,37.675 81.484,61.529 135.421,61.529c0.35,0 0.696,-0.025 1.046,-0.025c0.35,0 0.696,0.025 1.046,0.025c98.337,0 178.054,-79.716 178.054,-178.054c-0,-0.35 -0.025,-0.696 -0.025,-1.046c-0,-0.35 0.025,-0.696 0.025,-1.046Zm-306.554,89.534c-17.784,-25.046 -28.363,-55.55 -28.579,-88.488c0.566,-85.929 70.1,-155.466 156.033,-156.033c32.937,0.217 63.446,10.796 88.487,28.579c28.709,27.842 46.625,66.742 46.625,109.65c0,84.317 -68.6,152.917 -152.916,152.917c-42.909,-0 -81.809,-17.917 -109.65,-46.625Zm-66.313,-106.292c0,-97.025 78.938,-175.962 175.963,-175.962c41.3,-0 79.287,14.337 109.346,38.254c-27.08,-16.292 -58.755,-25.684 -92.588,-25.684c-99.333,0 -180.15,80.817 -180.15,180.15c0,33.825 9.388,65.492 25.671,92.567c-23.908,-30.05 -38.242,-68.033 -38.242,-109.325Zm192.721,171.767c-42.233,-0 -80.554,-16.988 -108.529,-44.471c25.862,18.725 57.575,29.808 91.771,29.808c86.629,0 157.104,-70.475 157.104,-157.104c-0,-34.196 -11.083,-65.908 -29.808,-91.771c27.483,27.975 44.47,66.296 44.47,108.529c0,85.471 -69.537,155.009 -155.008,155.009Z" fill="#cc5a71" fill-rule="nonzero" />
</g>
</g>
</svg>
</a>

# Introduction

This library is a monorepo template to create web-app application using this stack

- **[NextJS](https://nextjs.org/)** - as SSR web framework
- **[Flask](https://flask.palletsprojects.com/en/2.2.x/)** - as Rest API backend server
- **[StencilJS](https://stenciljs.com/)** - as UI library using web components

# Sections

- [Introduction](#introduction)
- [Sections](#sections)
- [Requirements](#requirements)
- [Get started](#get-started)
- [How to start local environment](#how-to-start-local-environment)
- [How to build the web app for production](#how-to-build-the-web-app-for-production)
- [How to use environments](#how-to-use-environments)
- [External libraries](#external-libraries)
- [UI library](#ui-library)
- [Server](#server)

<div id="requirements"></div>

# Requirements

- [Python 3+](https://www.python.org/downloads/)
- [Nodejs 16+ / npm](https://nodejs.org/en/)

<div id="get-started"></div>

# Get started

- Run `rm -rf .git` to remove the git project
- Replace the following placeholders with your application name in the project folder (use CMD/CTRL + SHIFT + F as a find shortcuts in **VSCode**):
  - **FLOACT** -> **APPLICATION NAME IN UPPERCASE**
  - **floact** -> **application name in lowercase (use only alphacharacter)**
- Run `npm run init` in the project root folder to install all the dependencies needed

<div id="how-to-start-local-environemt"></div>

# How to start local environment

- Run `npm start` in the project root folder to create a development local web server
  - Will build the UI components from **uilib** app
  - Will start the flask apis server from **server** app
  - Will start the NextJS web app from **client** app

<div id="how-to-build-the-web-app-for-production"></div>

# How to build the web app for production

- Run `npm build` in the project root folder to build the web application
  - Will build the UI components from **uilib** app
  - Will build the NextJS web app from **client** app

<div id="how-to-use-environments"></div>

# How to use environments

- Create the file `envs/.env.[ENVIRONMENT_NAME]`
- Write the following scripts inside the `package.json` in the project root folder:
  - `"start:[ENVIRONMENT_NAME]":"concurrently -n \"uilib,client,server\" -c \"#22AAA1,#CC5A71,#3F84E5\" \"yarn build:ui:watch\" \"yarn start:client:[ENVIRONMENT_NAME]\" \"yarn start:server:[ENVIRONMENT_NAME]\""` will start all the apps using [concurrently](https://www.npmjs.com/package/concurrently)
  - `"start:client:[ENVIRONMENT_NAME]": "rm -rf apps/client/.next && npm run build && ENV=[ENVIRONMENT_NAME] npm start"` will start the **client** app using the environment you want
  - `"start:server:[ENVIRONMENT_NAME]": "cd apps/server && ENV=[ENVIRONMENT_NAME] gunicorn --bind=0.0.0.0:3001 wsgi:app"`will start the **server** app using the environment you want
  - `"storybook:[ENVIRONMENT_NAME]": "cd apps/uilib && ENV=[ENVIRONMENT_NAME] yarn run start:storybook`will start the **server** app using the environment you want
- Run `yarn start:[ENVIRONMENT_NAME]` to launch all the apps
- **SIDE NOTES**:
  - Please try to mantain all the environemnt variables available in each environment
  - Three environments should be enough but eventually you can add/remove how many you like following the procedure above

<div id="external-libraries"></div>

# External libraries

It is a monorepo so you can keep the libraries in the root project (you can use **yarn** or **npm** as you prefer)

<div id="ui-library"></div>

# UI library

The UI library is optional so you can keep it or remove it according the project requirements, here are some hints:

- The UI library is written using **Web Components** using **StencilJS**
- All the **css variables** that define the global theme should be written inside the UI library
- If you choose to remove the UI library please remove all the references inside the **client** app
  - remove `apps/uilib` folder
  - remove all scripts that end with `:ui` and `:ui:*` in the package.json of the project (also the references inside other scripts)
  - remove inside `apps/client` of `@floact/uilib`

<div id="server"></div>

# Server

The **server** app is using Flask and Python3 as core libraries

- It is served with `flask run` in local environment
- It is server using **[wsgi](https://flask.palletsprojects.com/en/2.2.x/deploying/)** and **[gunicorn](https://gunicorn.org/)** in any other environment

You can check the file `apps/server/apis/home.py` for a `hello world` example on how this works, the api will be requested by `apps/client/pages/home` page and inserted inside the `apps/uilib/src/components/doc` component as a props

Here's the example (Only visible in localhost):

**[{this.apiTestString}](http://localhost:3001/api/home/)**
